<!DOCTYPE html>
<html lang="fr">
<head>
	<meta charset="UTF-8">
	<title>Ajax with JQuery</title>
	<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.6/css/bootstrap.min.css">
</head>
<body>
	<div class="container">
		<div class="row">
			<div class="col-md-6">
				<form action="#">
					<div class="input-group">
				    <input type="text" class="form-control" name="search" placeholder="Search for...">
				    <span class="input-group-btn">
				      <button class="btn btn-default" type="button">Go!</button>
				    </span>
				  </div>
				</form>
			</div>
			<div class="col-md-6">
				<div id="videos">
					<div class="template col-md-6">
						<div class="thumbnail">
						  <img class="affiche" src="http://placehold.it/300x300" >
						  <div class="caption">
						    <h3><a href="#" class="lien"><span class="titre">Le titre</span></a></h3>
						    <p class="resume">Lorem ipsum dolor sit amet, consectetur adipisicing elit. Laborum, molestias! Optio quibusdam excepturi, beatae ipsam cum voluptatem ab amet officiis sit incidunt ad rerum soluta, non eius expedita fugit eaque.</p>
						  </div>
						</div>
					</div>
				</div>
			</div>
		</div>	
	</div>
	



	

	<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/2.2.1/jquery.min.js"></script>
	<script>
		$(function(){
			
			$('form').submit(function(e){
				e.preventDefault();
				$.ajax({
	        method: 'GET',
	        url: 'https://www.googleapis.com/youtube/v3/search?',
	        data: { 
	        	part: 'snippet',
	        	q : $('input[name="search"]').val(),
	        	maxResults: 3,
	        	key: 'AIzaSyAyLf-DYjrAoAeOTjE0FUpow7dA1yXqPO4'
	        },
	        dataType: 'jsonp',
					success: afficher
				});
			});


			
			function afficher(data){

				var parent = $('#videos');
				var template = parent.find('.template'); 
				parent.empty();

				var data = data.items;	
				var items = [];
        for (item in data) {

	 				var titre = data[item].snippet.title;
					var href = "https://youtu.be/" + data[item].id.videoId;
					var resume = data[item].snippet.description;
					var affiche = data[item].snippet.thumbnails.high.url;
					
					var video = template.clone();

					video.find('.titre').html(titre);
					video.find('a').attr('href', href);
					video.find('.resume').html(resume);
					video.find('.affiche').attr('src', affiche);

				  parent.append(video);
        }

			}
			
		});	
	</script>
</body>
</html>